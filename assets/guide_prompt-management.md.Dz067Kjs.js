import{_ as r,C as c,c as F,o as p,a2 as a,b as D,j as n,w as o,a as l,G as i,a3 as y,t as m}from"./chunks/framework.CulRYwFH.js";const u="/mcp-composer/images/prompt_roadmap.png",B=JSON.parse('{"title":"Prompt Management in MCP Composer","description":"","frontmatter":{},"headers":[],"relativePath":"guide/prompt-management.md","filePath":"guide/prompt-management.md"}'),b={name:"guide/prompt-management.md"};function d(e,s,A,E,f,C){const t=c("Mermaid");return p(),F("div",null,[s[5]||(s[5]=a('<h1 id="prompt-management-in-mcp-composer" tabindex="-1">Prompt Management in MCP Composer <a class="header-anchor" href="#prompt-management-in-mcp-composer" aria-label="Permalink to &quot;Prompt Management in MCP Composer&quot;">​</a></h1><p>MCP Composer provides a comprehensive prompt management system that allows you to dynamically add, list, manage, enable, and disable prompts across your MCP infrastructure. The system supports both runtime prompt addition and static prompt loading from configuration files. As part of prompt management in MCP Composer, you will add prompts dynamically, list all registered prompts, get prompts from specific servers, filter prompts based on criteria, enable/disable prompts, and apply safety and validation rules. Among them, add prompts dynamically, list all registered prompts, list prompts per server, filter prompts, and enable/disable prompts are currently supported.</p><p>Here is the roadmap for prompt management in MCP Composer:</p><p><img src="'+u+`" alt="prompt_roadmap"></p><p>P.S - features those are in purple are supported today.</p><h2 id="key-functionality" tabindex="-1">Key Functionality <a class="header-anchor" href="#key-functionality" aria-label="Permalink to &quot;Key Functionality&quot;">​</a></h2><p>Based on the mind map shown, MCP Composer currently supports the following prompt management operations:</p><ul><li><strong>Add</strong>: Dynamically add new prompts to the system*</li><li><strong>List</strong>: Retrieve all registered prompts (excluding disabled ones)*</li><li><strong>List per Server</strong>: Get prompts from specific servers (excluding disabled ones)*</li><li><strong>Filter</strong>: Filter prompts based on criteria*</li><li><strong>Enable/Disable</strong>: Enable or disable prompts across servers*</li></ul><p>The following feature is planned to be implemented:</p><ul><li><strong>Guardrails</strong>: Apply safety and validation rules</li></ul><h2 id="core-components" tabindex="-1">Core Components <a class="header-anchor" href="#core-components" aria-label="Permalink to &quot;Core Components&quot;">​</a></h2><h3 id="_1-prompt-management-tools" tabindex="-1">1. Prompt Management Tools <a class="header-anchor" href="#_1-prompt-management-tools" aria-label="Permalink to &quot;1. Prompt Management Tools&quot;">​</a></h3><p>MCP Composer exposes six main tools for prompt management:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Add prompts dynamically</span></span>
<span class="line"><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_tool</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">add_prompts</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># List all prompts</span></span>
<span class="line"><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_tool</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">get_all_prompts</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># List prompts per server</span></span>
<span class="line"><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_tool</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">list_prompts_per_server</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Filter prompts</span></span>
<span class="line"><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_tool</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">filter_prompts</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Enable prompts</span></span>
<span class="line"><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_tool</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">enable_prompts</span><span style="color:#89DDFF;">))</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Disable prompts</span></span>
<span class="line"><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_tool</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">Tool</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_function</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">disable_prompts</span><span style="color:#89DDFF;">))</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="_2-prompt-management-flow" tabindex="-1">2. Prompt Management Flow <a class="header-anchor" href="#_2-prompt-management-flow" aria-label="Permalink to &quot;2. Prompt Management Flow&quot;">​</a></h3><p>The following sequence diagram illustrates the flow of prompt management operations:</p>`,16)),(p(),D(y,null,{default:o(()=>[i(t,{id:"mermaid-74",class:"mermaid-block",graph:"sequenceDiagram%0A%20%20%20%20participant%20Client%0A%20%20%20%20participant%20MCPComposer%0A%20%20%20%20participant%20PromptManager%0A%20%20%20%20participant%20ServerManager%0A%20%20%20%20participant%20FastMCP%0A%0A%20%20%20%20Note%20over%20Client%2C%20FastMCP%3A%20Dynamic%20Prompt%20Addition%20Flow%0A%20%20%20%20Client-%3E%3EMCPComposer%3A%20add_prompts(prompt_config)%0A%20%20%20%20MCPComposer-%3E%3EMCPComposer%3A%20validate%20prompt_config%0A%20%20%20%20MCPComposer-%3E%3EPromptManager%3A%20add_prompts(prompt_config)%0A%20%20%20%20PromptManager-%3E%3EPromptManager%3A%20build_prompt_from_dict(entry)%0A%20%20%20%20PromptManager-%3E%3EFastMCP%3A%20add_prompt(prompt)%0A%20%20%20%20PromptManager--%3E%3EMCPComposer%3A%20list%20of%20added%20prompt%20names%0A%20%20%20%20MCPComposer--%3E%3EClient%3A%20list%20of%20added%20prompt%20names%0A%0A%20%20%20%20Note%20over%20Client%2C%20FastMCP%3A%20Static%20File%20Loading%20Flow%0A%20%20%20%20Client-%3E%3EMCPComposer%3A%20setup_member_servers()%0A%20%20%20%20MCPComposer-%3E%3EMCPServerBuilder%3A%20build()%20for%20local%20type%0A%20%20%20%20MCPServerBuilder-%3E%3ELocalFile%3A%20load_json(prompt_path)%0A%20%20%20%20LocalFile--%3E%3EMCPServerBuilder%3A%20prompt%20data%20array%0A%20%20%20%20loop%20For%20each%20prompt%20entry%0A%20%20%20%20%20%20%20%20MCPServerBuilder-%3E%3EPromptManager%3A%20build_prompt_from_dict(entry)%0A%20%20%20%20%20%20%20%20PromptManager--%3E%3EMCPServerBuilder%3A%20Prompt%20object%0A%20%20%20%20%20%20%20%20MCPServerBuilder-%3E%3EFastMCP%3A%20add_prompt(prompt)%0A%20%20%20%20end%0A%20%20%20%20MCPServerBuilder--%3E%3EMCPComposer%3A%20FastMCP%20server%20with%20prompts%0A%20%20%20%20MCPComposer-%3E%3EMCPComposer%3A%20mount(sub_mcp%2C%20server_id)%0A%0A%20%20%20%20Note%20over%20Client%2C%20FastMCP%3A%20List%20Prompts%20Flow%0A%20%20%20%20Client-%3E%3EMCPComposer%3A%20get_all_prompts()%0A%20%20%20%20MCPComposer-%3E%3EPromptManager%3A%20get_prompts()%0A%20%20%20%20PromptManager-%3E%3EPromptManager%3A%20apply%20filtering%20(disabled%20prompts)%0A%20%20%20%20PromptManager--%3E%3EMCPComposer%3A%20filtered%20prompts_dict%0A%20%20%20%20MCPComposer-%3E%3EMCPComposer%3A%20convert%20to%20string%20list%0A%20%20%20%20MCPComposer--%3E%3EClient%3A%20list%20of%20prompt%20strings%0A%0A%20%20%20%20Note%20over%20Client%2C%20FastMCP%3A%20List%20Prompts%20Per%20Server%20Flow%0A%20%20%20%20Client-%3E%3EMCPComposer%3A%20list_prompts_per_server(server_id)%0A%20%20%20%20MCPComposer-%3E%3EPromptManager%3A%20list_prompts_per_server(server_id)%0A%20%20%20%20PromptManager-%3E%3EPromptManager%3A%20get_prompts()%20(with%20filtering)%0A%20%20%20%20PromptManager-%3E%3EPromptManager%3A%20filter%20by%20server_id%20prefix%0A%20%20%20%20PromptManager--%3E%3EMCPComposer%3A%20list%20of%20prompt%20dicts%0A%20%20%20%20MCPComposer--%3E%3EClient%3A%20list%20of%20prompts%20with%20server%20info%0A%0A%20%20%20%20Note%20over%20Client%2C%20FastMCP%3A%20Enable%2FDisable%20Prompts%20Flow%0A%20%20%20%20Client-%3E%3EMCPComposer%3A%20disable_prompts(prompts%2C%20server_id)%0A%20%20%20%20MCPComposer-%3E%3EPromptManager%3A%20disable_prompts(prompts%2C%20server_id)%0A%20%20%20%20PromptManager-%3E%3EServerManager%3A%20disable_prompts(prompts_to_disable%2C%20server_id)%0A%20%20%20%20ServerManager-%3E%3EServerManager%3A%20update%20disabled_prompts%20list%0A%20%20%20%20ServerManager--%3E%3EPromptManager%3A%20success%0A%20%20%20%20PromptManager--%3E%3EMCPComposer%3A%20success%20message%0A%20%20%20%20MCPComposer--%3E%3EClient%3A%20success%20message%0A%0A%20%20%20%20Note%20over%20Client%2C%20FastMCP%3A%20Filter%20Prompts%20Flow%0A%20%20%20%20Client-%3E%3EMCPComposer%3A%20filter_prompts(filter_criteria)%0A%20%20%20%20MCPComposer-%3E%3EPromptManager%3A%20filter_prompts(filter_criteria)%0A%20%20%20%20PromptManager-%3E%3EPromptManager%3A%20collect%20all%20prompts%20(with%20filtering)%0A%20%20%20%20PromptManager-%3E%3EPromptManager%3A%20apply%20filter%20criteria%20(name%2C%20description%2C%20tags)%0A%20%20%20%20PromptManager--%3E%3EMCPComposer%3A%20filtered%20list%20of%20prompt%20dicts%0A%20%20%20%20MCPComposer--%3E%3EClient%3A%20filtered%20prompts%0A"})]),fallback:o(()=>s[0]||(s[0]=[l(" Loading... ",-1)])),_:1})),s[6]||(s[6]=a(`<h3 id="_3-prompt-structure" tabindex="-1">3. Prompt Structure <a class="header-anchor" href="#_3-prompt-structure" aria-label="Permalink to &quot;3. Prompt Structure&quot;">​</a></h3><p>Each prompt follows a standardized structure defined in <code>test/data/prompts.json</code>:</p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt_name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Description of what the prompt does</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Template string with {{variable}} placeholders</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">variable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Description of the variable</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="adding-prompts" tabindex="-1">Adding Prompts <a class="header-anchor" href="#adding-prompts" aria-label="Permalink to &quot;Adding Prompts&quot;">​</a></h2><h3 id="method-1-dynamic-addition-via-api" tabindex="-1">Method 1: Dynamic Addition via API <a class="header-anchor" href="#method-1-dynamic-addition-via-api" aria-label="Permalink to &quot;Method 1: Dynamic Addition via API&quot;">​</a></h3><p>You can add prompts dynamically using the <code>add_prompts</code> function:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> add_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> prompt_config</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> Union</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">dict</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">dict</span><span style="color:#89DDFF;">]])</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    Add one or more prompts based on the provided configuration.</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    Returns a list of registered prompt names.</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#89DDFF;"> not</span><span style="color:#82AAFF;"> isinstance</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt_config</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> list</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        raise</span><span style="color:#FFCB6B;"> TypeError</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Prompt config must be a dict or a list of dicts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    added </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> []</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    for</span><span style="color:#BABED8;"> entry </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> prompt_config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        prompt </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> build_prompt_from_dict</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">entry</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">        super</span><span style="color:#89DDFF;">().</span><span style="color:#82AAFF;">add_prompt</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        added</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#BABED8;"> added</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="example-usage" tabindex="-1">Example Usage: <a class="header-anchor" href="#example-usage" aria-label="Permalink to &quot;Example Usage:&quot;">​</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Add a single prompt</span></span>
<span class="line"><span style="color:#BABED8;">prompt_config </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">app_top_errors_yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Show top erroneous calls handled by an application since yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Show top erroneous calls handled by &#39;</span><span style="color:#F78C6C;">{{</span><span style="color:#C3E88D;"> application </span><span style="color:#F78C6C;">}}</span><span style="color:#C3E88D;">&#39; application since yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">application</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> true</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">The name of the application</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    ]</span></span>
<span class="line"><span style="color:#89DDFF;">}]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">added_prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt_config</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;Added prompts: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">added_prompts</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="method-2-static-loading-from-local-files" tabindex="-1">Method 2: Static Loading from Local Files <a class="header-anchor" href="#method-2-static-loading-from-local-files" aria-label="Permalink to &quot;Method 2: Static Loading from Local Files&quot;">​</a></h3><p>Prompts can be loaded from local JSON files using the &quot;local&quot; server type:</p><h4 id="configuration-example" tabindex="-1">Configuration Example: <a class="header-anchor" href="#configuration-example" aria-label="Permalink to &quot;Configuration Example:&quot;">​</a></h4><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">local</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">prompt_path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">./test/data/prompts.json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="implementation-details" tabindex="-1">Implementation Details: <a class="header-anchor" href="#implementation-details" aria-label="Permalink to &quot;Implementation Details:&quot;">​</a></h4><p>The local file loading is handled by the <code>MCPServerBuilder._build_from_local_file()</code> method:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> _build_from_local_file</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> FastMCP</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    mcp </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> FastMCP</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">ConfigKey</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">ID</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#BABED8;">    data </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> load_json</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;">self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">[</span><span style="color:#F07178;">ConfigKey</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">PROMPT_PATH</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    for</span><span style="color:#BABED8;"> entry </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> data</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        prompt </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#82AAFF;"> build_prompt_from_dict</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">entry</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">info</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Prompt: </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> prompt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        mcp</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_prompt</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#BABED8;"> mcp</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="listing-prompts" tabindex="-1">Listing Prompts <a class="header-anchor" href="#listing-prompts" aria-label="Permalink to &quot;Listing Prompts&quot;">​</a></h2><h3 id="get-all-prompts" tabindex="-1">Get All Prompts <a class="header-anchor" href="#get-all-prompts" aria-label="Permalink to &quot;Get All Prompts&quot;">​</a></h3><p>The <code>get_all_prompts</code> function retrieves all registered prompts (excluding disabled ones):</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> get_all_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Get all registered prompts mapped to their textual form from composer and mounted servers.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    prompts_dict </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_prompt_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_prompts</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;"> [</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;font-style:italic;"> for</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> prompts_dict</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">values</span><span style="color:#89DDFF;">()]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="example-usage-1" tabindex="-1">Example Usage: <a class="header-anchor" href="#example-usage-1" aria-label="Permalink to &quot;Example Usage:&quot;">​</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Get all registered prompts (excluding disabled ones)</span></span>
<span class="line"><span style="color:#BABED8;">all_prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_all_prompts</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> all_prompts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="prompt-building-process" tabindex="-1">Prompt Building Process <a class="header-anchor" href="#prompt-building-process" aria-label="Permalink to &quot;Prompt Building Process&quot;">​</a></h2><h3 id="the-build-prompt-from-dict-function" tabindex="-1">The <code>build_prompt_from_dict</code> Function <a class="header-anchor" href="#the-build-prompt-from-dict-function" aria-label="Permalink to &quot;The \`build_prompt_from_dict\` Function&quot;">​</a></h3><p>This utility function converts prompt dictionaries into FastMCP Prompt objects:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> build_prompt_from_dict</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">entry</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> dict</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> Prompt</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    name </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> entry</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">    template </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> entry</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#BABED8;">    description </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> entry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    arguments </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> entry</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">    def</span><span style="color:#82AAFF;"> fn</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        Replaces placeholders in the template string with values from arguments.</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            result </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> template</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">format</span><span style="color:#89DDFF;">(**</span><span style="color:#82AAFF;">arguments</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#BABED8;"> result</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        except</span><span style="color:#FFCB6B;"> KeyError</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            raise</span><span style="color:#FFCB6B;"> ValueError</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;Missing required argument: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">args</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Wrap into a FastMCP Prompt</span></span>
<span class="line"><span style="color:#BABED8;">    prompt </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> Prompt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">from_function</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">fn</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> name</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">name</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> description</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">description</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    prompt</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">arguments</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> arguments</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#BABED8;"> prompt</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">### List Prompts Per Server</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">The \`list_prompts_per_server\` function retrieves </span><span style="color:#82AAFF;">all</span><span style="color:#BABED8;"> prompts </span><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#BABED8;"> a specific </span><span style="color:#82AAFF;">server </span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">excluding disabled ones</span><span style="color:#89DDFF;">):</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">\`\`\`python</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> list_prompts_per_server</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> server_id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">dict</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">List all prompts from a specific server.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_prompt_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">list_prompts_per_server</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">server_id</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br></div></div><h4 id="example-usage-2" tabindex="-1">Example Usage: <a class="header-anchor" href="#example-usage-2" aria-label="Permalink to &quot;Example Usage:&quot;">​</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># List prompts from a specific server (excluding disabled ones)</span></span>
<span class="line"><span style="color:#BABED8;">prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">list_prompts_per_server</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my-server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> prompts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;Prompt: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> from server: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">server_id</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;  Description: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">    print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;  Template: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="implementation-details-1" tabindex="-1">Implementation Details: <a class="header-anchor" href="#implementation-details-1" aria-label="Permalink to &quot;Implementation Details:&quot;">​</a></h4><p>The method checks if the server exists and retrieves prompts from the specific server, automatically filtering out disabled prompts:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> list_prompts_per_server</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> server_id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> List</span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">Dict</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">List all prompts from a specific server.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#89DDFF;"> not</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;"> or</span><span style="color:#89DDFF;"> not</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">has_member_server</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">server_id</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#89DDFF;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # Use our filtered get_prompts method which automatically excludes disabled prompts</span></span>
<span class="line"><span style="color:#BABED8;">        all_prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_prompts</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">        server_prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> all_prompts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">items</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> key</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">startswith</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">server_id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">_&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#BABED8;">                server_prompts</span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">key</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> prompt</span></span>
<span class="line"><span style="color:#BABED8;">        result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> []</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> server_prompts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">items</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            name </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> getattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">            description </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> getattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">            result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">({</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> name</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> description</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">),</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">server_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> server_id</span></span>
<span class="line"><span style="color:#89DDFF;">            })</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> result</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Error listing prompts for server &#39;</span><span style="color:#F78C6C;">%s</span><span style="color:#C3E88D;">&#39;: </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> server_id</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> e</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> []</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="enabling-and-disabling-prompts" tabindex="-1">Enabling and Disabling Prompts <a class="header-anchor" href="#enabling-and-disabling-prompts" aria-label="Permalink to &quot;Enabling and Disabling Prompts&quot;">​</a></h2><h3 id="enable-prompts" tabindex="-1">Enable Prompts <a class="header-anchor" href="#enable-prompts" aria-label="Permalink to &quot;Enable Prompts&quot;">​</a></h3><p>The <code>enable_prompts</code> function allows you to enable previously disabled prompts:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> enable_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> prompts</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">],</span><span style="color:#BABED8;font-style:italic;"> server_id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Enable prompts from a specific server.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_prompt_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">enable_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompts</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> server_id</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="example-usage-3" tabindex="-1">Example Usage: <a class="header-anchor" href="#example-usage-3" aria-label="Permalink to &quot;Example Usage:&quot;">​</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Enable a single prompt</span></span>
<span class="line"><span style="color:#BABED8;">result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">enable_prompts</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app_top_errors_yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # &quot;Enabled [&#39;mcp-prompt_app_top_errors_yesterday&#39;] prompts from server mcp-prompt&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Enable multiple prompts</span></span>
<span class="line"><span style="color:#BABED8;">result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">enable_prompts</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prompt1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">my-server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # &quot;Enabled [&#39;my-server_prompt1&#39;, &#39;my-server_prompt2&#39;] prompts from server my-server&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="disable-prompts" tabindex="-1">Disable Prompts <a class="header-anchor" href="#disable-prompts" aria-label="Permalink to &quot;Disable Prompts&quot;">​</a></h3><p>The <code>disable_prompts</code> function allows you to disable prompts:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> disable_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> prompts</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">],</span><span style="color:#BABED8;font-style:italic;"> server_id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Disable prompts from a specific server.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_prompt_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disable_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompts</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> server_id</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="example-usage-4" tabindex="-1">Example Usage: <a class="header-anchor" href="#example-usage-4" aria-label="Permalink to &quot;Example Usage:&quot;">​</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Disable a single prompt</span></span>
<span class="line"><span style="color:#BABED8;">result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disable_prompts</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app_top_errors_yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # &quot;Disabled [&#39;mcp-prompt_app_top_errors_yesterday&#39;] prompts from server mcp-prompt&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Disable multiple prompts</span></span>
<span class="line"><span style="color:#BABED8;">result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disable_prompts</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prompt1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">my-server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#676E95;font-style:italic;">  # &quot;Disabled [&#39;my-server_prompt1&#39;, &#39;my-server_prompt2&#39;] prompts from server my-server&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h4 id="implementation-details-2" tabindex="-1">Implementation Details: <a class="header-anchor" href="#implementation-details-2" aria-label="Permalink to &quot;Implementation Details:&quot;">​</a></h4><p>The enable/disable functionality works by:</p><ol><li><strong>Finding prompts by name</strong>: The system searches for prompts by their <code>name</code> attribute</li><li><strong>Server-specific</strong>: Prompts are disabled/enabled per server</li><li><strong>Persistent storage</strong>: Changes are persisted to the database</li><li><strong>Filtering</strong>: Disabled prompts are automatically filtered out from <code>get_all_prompts()</code> and <code>list_prompts_per_server()</code></li></ol><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> disable_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> prompts</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">],</span><span style="color:#BABED8;font-style:italic;"> server_id</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    Disable a prompt or multiple prompts from the member server</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    if</span><span style="color:#89DDFF;"> not</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Server manager not available</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">check_server_exist</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">server_id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        server_prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_prompts</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">        # Check if prompts exist in the server</span></span>
<span class="line"><span style="color:#BABED8;">        available_prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [</span><span style="color:#BABED8;">name </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> server_prompts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">keys</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;font-style:italic;"> if</span><span style="color:#BABED8;"> name</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">startswith</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">server_id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">_&quot;</span><span style="color:#89DDFF;">)]</span></span>
<span class="line"><span style="color:#BABED8;">        prompts_to_disable </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> []</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> prompts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">            full_prompt_name </span><span style="color:#89DDFF;">=</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;</span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">server_id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">_</span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">prompt</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> full_prompt_name </span><span style="color:#89DDFF;">in</span><span style="color:#BABED8;"> available_prompts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">                prompts_to_disable</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">full_prompt_name</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#89DDFF;"> not</span><span style="color:#BABED8;"> prompts_to_disable</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;No prompts found to disable: </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">prompts</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disable_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompts_to_disable</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> server_id</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">        logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">info</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Disabled </span><span style="color:#F78C6C;">%s</span><span style="color:#C3E88D;"> prompts from server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> prompts_to_disable</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Disabled </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">prompts_to_disable</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> prompts from server </span><span style="color:#F78C6C;">{</span><span style="color:#BABED8;">server_id</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Error disabling prompts: </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> e</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#C792EA;"> f</span><span style="color:#C3E88D;">&quot;Failed to disable prompts: </span><span style="color:#F78C6C;">{</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">e</span><span style="color:#89DDFF;">)</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h3 id="filtering-disabled-prompts" tabindex="-1">Filtering Disabled Prompts <a class="header-anchor" href="#filtering-disabled-prompts" aria-label="Permalink to &quot;Filtering Disabled Prompts&quot;">​</a></h3><p>Disabled prompts are automatically filtered out from all listing operations:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">def</span><span style="color:#82AAFF;"> _filter_disabled_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> prompts</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> dict</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> Prompt</span><span style="color:#89DDFF;">])</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> dict</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> Prompt</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Filter prompts by removing disabled ones.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#89DDFF;"> not</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#BABED8;"> prompts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        server_config </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">list</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        if</span><span style="color:#89DDFF;"> not</span><span style="color:#BABED8;"> server_config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            return</span><span style="color:#BABED8;"> prompts</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        remove_set </span><span style="color:#89DDFF;">=</span><span style="color:#FFCB6B;"> set</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> member </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> server_config</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> member</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">health_status</span><span style="color:#89DDFF;"> ==</span><span style="color:#BABED8;"> HealthStatus</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">unhealthy</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                continue</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> member</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">disabled_prompts</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">                remove_set</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">update</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">member</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">disabled_prompts</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">        filtered_prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> {}</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> name</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> prompts</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">items</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            # Check if this prompt should be filtered out</span></span>
<span class="line"><span style="color:#BABED8;">            should_remove </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"><span style="color:#BABED8;">            </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">            # Check exact key match first</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> name </span><span style="color:#89DDFF;">in</span><span style="color:#BABED8;"> remove_set</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">                should_remove </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">                # Check if any disabled prompt matches this prompt by name</span></span>
<span class="line"><span style="color:#BABED8;">                prompt_name </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> getattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> None)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                if</span><span style="color:#BABED8;"> prompt_name</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                    for</span><span style="color:#BABED8;"> disabled_prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> remove_set</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                        if</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">_</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> disabled_prompt</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">                            disabled_prompt_name </span><span style="color:#89DDFF;">=</span><span style="color:#BABED8;"> disabled_prompt</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">split</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#F78C6C;"> 1</span><span style="color:#89DDFF;">)[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                            if</span><span style="color:#BABED8;"> prompt_name</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lower</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> ==</span><span style="color:#BABED8;"> disabled_prompt_name</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lower</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">                                should_remove </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                                break</span></span>
<span class="line"><span style="color:#BABED8;">            </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> should_remove</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                continue</span></span>
<span class="line"><span style="color:#BABED8;">            </span></span>
<span class="line"><span style="color:#BABED8;">            filtered_prompts</span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">name</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> =</span><span style="color:#BABED8;"> prompt</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> filtered_prompts</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exception</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Prompts filtering failed: </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> e</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        raise</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h2 id="filtering-prompts" tabindex="-1">Filtering Prompts <a class="header-anchor" href="#filtering-prompts" aria-label="Permalink to &quot;Filtering Prompts&quot;">​</a></h2><h3 id="filter-prompts-by-criteria" tabindex="-1">Filter Prompts by Criteria <a class="header-anchor" href="#filter-prompts-by-criteria" aria-label="Permalink to &quot;Filter Prompts by Criteria&quot;">​</a></h3><p>The <code>filter_prompts</code> function allows filtering prompts based on various criteria (excluding disabled ones):</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> filter_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> filter_criteria</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> dict</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> list</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">dict</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Filter prompts based on criteria like name, description, tags, etc.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    return</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_prompt_manager</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">filter_criteria</span><span style="color:#89DDFF;">)</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="example-usage-5" tabindex="-1">Example Usage: <a class="header-anchor" href="#example-usage-5" aria-label="Permalink to &quot;Example Usage:&quot;">​</a></h4><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;"># Filter by name</span></span>
<span class="line"><span style="color:#BABED8;">result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter_prompts</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Filter by description</span></span>
<span class="line"><span style="color:#BABED8;">result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter_prompts</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">response</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># Filter by multiple criteria</span></span>
<span class="line"><span style="color:#BABED8;">result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter_prompts</span><span style="color:#89DDFF;">({</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">})</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="implementation-details-3" tabindex="-1">Implementation Details: <a class="header-anchor" href="#implementation-details-3" aria-label="Permalink to &quot;Implementation Details:&quot;">​</a></h4><p>The filtering method collects prompts from both the composer and all mounted servers (excluding disabled ones), then applies the filter criteria:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> filter_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;font-style:italic;"> filter_criteria</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> dict</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> -&gt;</span><span style="color:#BABED8;"> List</span><span style="color:#89DDFF;">[</span><span style="color:#BABED8;">Dict</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Filter prompts based on criteria like name, description, tags.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        prompts_dict </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> self</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_prompts</span><span style="color:#89DDFF;">()</span><span style="color:#676E95;font-style:italic;">  # This already excludes disabled prompts</span></span>
<span class="line"><span style="color:#BABED8;">        result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> []</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        for</span><span style="color:#BABED8;"> key</span><span style="color:#89DDFF;">,</span><span style="color:#BABED8;"> prompt </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#BABED8;"> prompts_dict</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">items</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">            match </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> True</span></span>
<span class="line"><span style="color:#BABED8;">            name </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> getattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> key</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">            description </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> getattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">            tags </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> getattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">tags</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> [])</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> filter_criteria </span><span style="color:#89DDFF;">and</span><span style="color:#BABED8;"> filter_criteria</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                if</span><span style="color:#BABED8;"> filter_criteria</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">].</span><span style="color:#82AAFF;">lower</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> not</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> name</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lower</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">                    match </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> match </span><span style="color:#89DDFF;">and</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> filter_criteria </span><span style="color:#89DDFF;">and</span><span style="color:#BABED8;"> filter_criteria</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                if</span><span style="color:#BABED8;"> filter_criteria</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">].</span><span style="color:#82AAFF;">lower</span><span style="color:#89DDFF;">()</span><span style="color:#89DDFF;"> not</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> description</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">lower</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">                    match </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> match </span><span style="color:#89DDFF;">and</span><span style="color:#89DDFF;"> &#39;</span><span style="color:#C3E88D;">tags</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> filter_criteria </span><span style="color:#89DDFF;">and</span><span style="color:#BABED8;"> filter_criteria</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tags</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]:</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">                if</span><span style="color:#89DDFF;"> not</span><span style="color:#82AAFF;"> any</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">tag </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#82AAFF;"> tags </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#82AAFF;"> tag </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#82AAFF;"> filter_criteria</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">tags</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]):</span></span>
<span class="line"><span style="color:#BABED8;">                    match </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> False</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">            if</span><span style="color:#BABED8;"> match</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">                result</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">append</span><span style="color:#89DDFF;">({</span></span>
<span class="line"><span style="color:#89DDFF;">                    &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> name</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                    &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> description</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                    &quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#FFCB6B;"> str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;">                })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#BABED8;"> result</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    except</span><span style="color:#FFCB6B;"> Exception</span><span style="color:#89DDFF;font-style:italic;"> as</span><span style="color:#BABED8;"> e</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">        logger</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">error</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">Error filtering prompts: </span><span style="color:#F78C6C;">%s</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> e</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">        return</span><span style="color:#89DDFF;"> []</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h2 id="example-prompts" tabindex="-1">Example Prompts <a class="header-anchor" href="#example-prompts" aria-label="Permalink to &quot;Example Prompts&quot;">​</a></h2><p>The system comes with a comprehensive set of pre-defined prompts for common operations:</p><h3 id="application-monitoring-prompts" tabindex="-1">Application Monitoring Prompts <a class="header-anchor" href="#application-monitoring-prompts" aria-label="Permalink to &quot;Application Monitoring Prompts&quot;">​</a></h3><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">app_top_errors_yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Show top erroneous calls handled by an application since yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Show top erroneous calls handled by &#39;{{ application }}&#39; application since yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">application</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">The name of the application</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="performance-monitoring-prompts" tabindex="-1">Performance Monitoring Prompts <a class="header-anchor" href="#performance-monitoring-prompts" aria-label="Permalink to &quot;Performance Monitoring Prompts&quot;">​</a></h3><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">promo_http_avg_response</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Average response time of promo HTTP calls handled by a cluster</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">What is the average response time of promo HTTP calls handled by Kubernetes cluster {{ cluster }}?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">cluster</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">The name of the Kubernetes cluster</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="infrastructure-monitoring-prompts" tabindex="-1">Infrastructure Monitoring Prompts <a class="header-anchor" href="#infrastructure-monitoring-prompts" aria-label="Permalink to &quot;Infrastructure Monitoring Prompts&quot;">​</a></h3><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">queue_depth_check</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Current queue depth of a given AMQ queue</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">What is the current queue depth of {{ queue_name }} from the queue manager running on namespace {{ namespace }}?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">queue_name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">The name of the AMQ queue</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        },</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">namespace</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#FFCB6B;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">The namespace of the queue manager</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    ]</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h2 id="testing-prompt-management" tabindex="-1">Testing Prompt Management <a class="header-anchor" href="#testing-prompt-management" aria-label="Permalink to &quot;Testing Prompt Management&quot;">​</a></h2><h3 id="unit-tests" tabindex="-1">Unit Tests <a class="header-anchor" href="#unit-tests" aria-label="Permalink to &quot;Unit Tests&quot;">​</a></h3><p>The system includes comprehensive unit tests for prompt management:</p><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asyncio</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> test_add_prompts</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#BABED8;">    composer </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MCPComposer</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">composer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    config </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [{</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">promo_http_avg_response</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Average response time of promo HTTP calls handled by a cluster</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">What is the average response time of promo HTTP calls handled by Kubernetes cluster </span><span style="color:#F78C6C;">{{</span><span style="color:#C3E88D;"> cluster </span><span style="color:#F78C6C;">}}</span><span style="color:#C3E88D;">?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">            {</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">cluster</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">                &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">The name of the Kubernetes cluster</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">            }</span></span>
<span class="line"><span style="color:#89DDFF;">        ]</span></span>
<span class="line"><span style="color:#89DDFF;">    }]</span></span>
<span class="line"><span style="color:#BABED8;">    res </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">config</span><span style="color:#89DDFF;">)</span><span style="color:#BABED8;">     </span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">res</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 1</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Composer should return a dictionary of prompts</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="integration-tests" tabindex="-1">Integration Tests <a class="header-anchor" href="#integration-tests" aria-label="Permalink to &quot;Integration Tests&quot;">​</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asyncio</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> test_builder_local</span><span style="color:#89DDFF;">():</span><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#BABED8;">    config </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [{</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">local</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">prompt_path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">./test/data/prompts.json</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    }]</span></span>
<span class="line"><span style="color:#BABED8;">    composer </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MCPComposer</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">composer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setup_member_servers</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    prompts </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get_all_prompts</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompts</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 16</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Composer should return 16 prompts from local file</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> isinstance</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompts</span><span style="color:#89DDFF;">,</span><span style="color:#FFCB6B;"> list</span><span style="color:#89DDFF;">),</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Should return a list of prompts</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="enable-disable-tests" tabindex="-1">Enable/Disable Tests <a class="header-anchor" href="#enable-disable-tests" aria-label="Permalink to &quot;Enable/Disable Tests&quot;">​</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asyncio</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> test_disable_and_enable_prompts</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Test the full disable/enable prompt flow.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    composer </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MCPComposer</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">composer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Test disabling prompts</span></span>
<span class="line"><span style="color:#BABED8;">    result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">disable_prompts</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app_top_errors_yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Disabled</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> result </span><span style="color:#89DDFF;">or</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">No prompts found to disable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> result</span></span>
<span class="line"><span style="color:#BABED8;">    </span></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Test enabling prompts</span></span>
<span class="line"><span style="color:#BABED8;">    result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">enable_prompts</span><span style="color:#89DDFF;">([</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">app_top_errors_yesterday</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Enabled</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> result </span><span style="color:#89DDFF;">or</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">No prompts disabled</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;"> in</span><span style="color:#BABED8;"> result</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="filter-tests" tabindex="-1">Filter Tests <a class="header-anchor" href="#filter-tests" aria-label="Permalink to &quot;Filter Tests&quot;">​</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asyncio</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> test_filter_prompts</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Test filtering prompts by criteria.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    composer </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MCPComposer</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test-composer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Add test prompts</span></span>
<span class="line"><span style="color:#BABED8;">    prompt_config </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test_prompt_1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">First test prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Template 1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        },</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test_prompt_2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Second test prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Template 2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        },</span></span>
<span class="line"><span style="color:#89DDFF;">        {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">another_prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Another prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#C3E88D;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Template 3</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">        }</span></span>
<span class="line"><span style="color:#89DDFF;">    ]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_prompts</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">prompt_config</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Test filtering by name</span></span>
<span class="line"><span style="color:#BABED8;">    result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter_prompts</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 2</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> any</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">r</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> ==</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test_prompt_1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;font-style:italic;"> for</span><span style="color:#82AAFF;"> r </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#82AAFF;"> result</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> any</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">r</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> ==</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test_prompt_2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;font-style:italic;"> for</span><span style="color:#82AAFF;"> r </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#82AAFF;"> result</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Test filtering by description</span></span>
<span class="line"><span style="color:#BABED8;">    result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter_prompts</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">First</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 1</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> ==</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test_prompt_1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Test filtering with no matches</span></span>
<span class="line"><span style="color:#BABED8;">    result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">filter_prompts</span><span style="color:#89DDFF;">({</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">nonexistent</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">})</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 0</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><h3 id="list-per-server-tests" tabindex="-1">List Per Server Tests <a class="header-anchor" href="#list-per-server-tests" aria-label="Permalink to &quot;List Per Server Tests&quot;">​</a></h3><div class="language-python line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">asyncio</span></span>
<span class="line"><span style="color:#C792EA;">async</span><span style="color:#C792EA;"> def</span><span style="color:#82AAFF;"> test_list_prompts_per_server</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    &quot;&quot;&quot;</span><span style="color:#676E95;font-style:italic;">Test listing prompts from a specific server.</span><span style="color:#89DDFF;font-style:italic;">&quot;&quot;&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    composer </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MCPComposer</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test-composer</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Mock server manager to return a mock server</span></span>
<span class="line"><span style="color:#BABED8;">    mock_server </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MagicMock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    mock_server</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">server</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> MagicMock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;">    # Create proper mock prompts</span></span>
<span class="line"><span style="color:#BABED8;">    mock_prompt1 </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MagicMock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    mock_prompt1</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    mock_prompt1</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">description</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Test prompt 1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    mock_prompt2 </span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;"> MagicMock</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#BABED8;">    mock_prompt2</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#BABED8;">    mock_prompt2</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">description</span><span style="color:#89DDFF;"> =</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Test prompt 2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    mock_server</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">get_prompts</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> AsyncMock</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">return_value</span><span style="color:#89DDFF;">={</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">prompt1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> mock_prompt1</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#C3E88D;">prompt2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#82AAFF;"> mock_prompt2</span></span>
<span class="line"><span style="color:#89DDFF;">    })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    composer</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">has_member_server</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> MagicMock</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">return_value</span><span style="color:#89DDFF;">=True)</span></span>
<span class="line"><span style="color:#BABED8;">    composer</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_server_manager</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">get_member</span><span style="color:#89DDFF;"> =</span><span style="color:#82AAFF;"> MagicMock</span><span style="color:#89DDFF;">(</span><span style="color:#BABED8;font-style:italic;">return_value</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">mock_server</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">    result </span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;font-style:italic;"> await</span><span style="color:#BABED8;"> composer</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">list_prompts_per_server</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">test-server</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#82AAFF;"> len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">result</span><span style="color:#89DDFF;">)</span><span style="color:#89DDFF;"> ==</span><span style="color:#F78C6C;"> 2</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> ==</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt1</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> ==</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">    assert</span><span style="color:#BABED8;"> result</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">][</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">server_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#89DDFF;"> ==</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test-server</span><span style="color:#89DDFF;">&quot;</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br></div></div><h2 id="api-endpoints" tabindex="-1">API Endpoints <a class="header-anchor" href="#api-endpoints" aria-label="Permalink to &quot;API Endpoints&quot;">​</a></h2><h3 id="rest-api-support" tabindex="-1">REST API Support <a class="header-anchor" href="#rest-api-support" aria-label="Permalink to &quot;REST API Support&quot;">​</a></h3><p>MCP Composer also exposes prompt management through REST endpoints:</p><h4 id="add-prompts" tabindex="-1">Add Prompts <a class="header-anchor" href="#add-prompts" aria-label="Permalink to &quot;Add Prompts&quot;">​</a></h4><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">POST</span><span style="color:#BABED8;"> /mcp/tools/add_prompts</span></span>
<span class="line"><span style="color:#F07178;">Content-Type</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">prompt_config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">      {</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#F78C6C;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt_name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#F78C6C;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Prompt description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#F78C6C;">template</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Template with {{variable}}</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">        &quot;</span><span style="color:#F78C6C;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span></span>
<span class="line"><span style="color:#89DDFF;">          {</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">variable</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#F07178;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">string</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#F07178;">required</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> true,</span></span>
<span class="line"><span style="color:#89DDFF;">            &quot;</span><span style="color:#F07178;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">Variable description</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">          }</span></span>
<span class="line"><span style="color:#89DDFF;">        ]</span></span>
<span class="line"><span style="color:#89DDFF;">      }</span></span>
<span class="line"><span style="color:#89DDFF;">    ]</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br></div></div><h4 id="get-all-prompts-1" tabindex="-1">Get All Prompts <a class="header-anchor" href="#get-all-prompts-1" aria-label="Permalink to &quot;Get All Prompts&quot;">​</a></h4><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">POST</span><span style="color:#BABED8;"> /mcp/tools/get_all_prompts</span></span>
<span class="line"><span style="color:#F07178;">Content-Type</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {}</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h4 id="list-prompts-per-server" tabindex="-1">List Prompts Per Server <a class="header-anchor" href="#list-prompts-per-server" aria-label="Permalink to &quot;List Prompts Per Server&quot;">​</a></h4><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">POST</span><span style="color:#BABED8;"> /mcp/tools/list_prompts_per_server</span></span>
<span class="line"><span style="color:#F07178;">Content-Type</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">server_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">my-server</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="filter-prompts" tabindex="-1">Filter Prompts <a class="header-anchor" href="#filter-prompts" aria-label="Permalink to &quot;Filter Prompts&quot;">​</a></h4><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">POST</span><span style="color:#BABED8;"> /mcp/tools/filter_prompts</span></span>
<span class="line"><span style="color:#F07178;">Content-Type</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">filter_criteria</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">      &quot;</span><span style="color:#F78C6C;">name</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">test</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">      &quot;</span><span style="color:#F78C6C;">description</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">response</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">    }</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h4 id="enable-prompts-1" tabindex="-1">Enable Prompts <a class="header-anchor" href="#enable-prompts-1" aria-label="Permalink to &quot;Enable Prompts&quot;">​</a></h4><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">POST</span><span style="color:#BABED8;"> /mcp/tools/enable_prompts</span></span>
<span class="line"><span style="color:#F07178;">Content-Type</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">prompts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prompt1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">server_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">my-server</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h4 id="disable-prompts-1" tabindex="-1">Disable Prompts <a class="header-anchor" href="#disable-prompts-1" aria-label="Permalink to &quot;Disable Prompts&quot;">​</a></h4><div class="language-http line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">http</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">POST</span><span style="color:#BABED8;"> /mcp/tools/disable_prompts</span></span>
<span class="line"><span style="color:#F07178;">Content-Type</span><span style="color:#F78C6C;">:</span><span style="color:#C3E88D;"> application/json</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">{</span></span>
<span class="line"><span style="color:#89DDFF;">  &quot;</span><span style="color:#C792EA;">arguments</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">prompts</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> [</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">prompt1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">prompt2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">],</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#FFCB6B;">server_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">my-server</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h2 id="best-practices" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practices" aria-label="Permalink to &quot;Best Practices&quot;">​</a></h2><h3 id="_1-prompt-naming" tabindex="-1">1. Prompt Naming <a class="header-anchor" href="#_1-prompt-naming" aria-label="Permalink to &quot;1. Prompt Naming&quot;">​</a></h3><ul><li>Use descriptive, lowercase names with underscores</li><li>Include the domain/context in the name (e.g., <code>app_</code>, <code>cluster_</code>, <code>jvm_</code>)</li></ul><h3 id="_2-template-design" tabindex="-1">2. Template Design <a class="header-anchor" href="#_2-template-design" aria-label="Permalink to &quot;2. Template Design&quot;">​</a></h3>`,97)),n("ul",null,[s[3]||(s[3]=n("li",null,"Use clear, natural language templates",-1)),n("li",null,[s[1]||(s[1]=l("Include all required variables with ",-1)),n("code",null,m(e.variable_name),1),s[2]||(s[2]=l(" syntax",-1))]),s[4]||(s[4]=n("li",null,"Provide meaningful descriptions for each argument",-1))]),s[7]||(s[7]=a(`<h3 id="_3-argument-validation" tabindex="-1">3. Argument Validation <a class="header-anchor" href="#_3-argument-validation" aria-label="Permalink to &quot;3. Argument Validation&quot;">​</a></h3><ul><li>Always specify <code>required: true</code> for mandatory arguments</li><li>Use appropriate types (<code>string</code>, <code>integer</code>, <code>boolean</code>)</li><li>Provide clear descriptions for each argument</li></ul><h3 id="_4-error-handling" tabindex="-1">4. Error Handling <a class="header-anchor" href="#_4-error-handling" aria-label="Permalink to &quot;4. Error Handling&quot;">​</a></h3><ul><li>Templates should handle missing arguments gracefully</li><li>Use try-catch blocks in prompt functions when appropriate</li></ul><h3 id="_5-filtering-best-practices" tabindex="-1">5. Filtering Best Practices <a class="header-anchor" href="#_5-filtering-best-practices" aria-label="Permalink to &quot;5. Filtering Best Practices&quot;">​</a></h3><ul><li>Use case-insensitive filtering for better user experience</li><li>Combine multiple criteria for more precise filtering</li><li>Consider performance when filtering large numbers of prompts</li></ul><h3 id="_6-server-specific-operations" tabindex="-1">6. Server-Specific Operations <a class="header-anchor" href="#_6-server-specific-operations" aria-label="Permalink to &quot;6. Server-Specific Operations&quot;">​</a></h3><ul><li>Always verify server existence before listing prompts</li><li>Handle server connection errors gracefully</li><li>Include server_id in results for clarity</li></ul><h2 id="configuration-files" tabindex="-1">Configuration Files <a class="header-anchor" href="#configuration-files" aria-label="Permalink to &quot;Configuration Files&quot;">​</a></h2><h3 id="prompt-servers-configuration" tabindex="-1">Prompt Servers Configuration <a class="header-anchor" href="#prompt-servers-configuration" aria-label="Permalink to &quot;Prompt Servers Configuration&quot;">​</a></h3><p>Location: <code>test/data/prompt_servers.json</code></p><div class="language-json line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki material-theme-palenight vp-code" tabindex="0"><code><span class="line"><span style="color:#89DDFF;">[</span></span>
<span class="line"><span style="color:#89DDFF;">  {</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">local</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">prompt_path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">./src/mcp-composer/test/data/prompts.json</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#89DDFF;">    &quot;</span><span style="color:#C792EA;">_id</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span><span style="color:#89DDFF;"> &quot;</span><span style="color:#C3E88D;">mcp-prompt</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#89DDFF;">  }</span></span>
<span class="line"><span style="color:#89DDFF;">]</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="prompts-data" tabindex="-1">Prompts Data <a class="header-anchor" href="#prompts-data" aria-label="Permalink to &quot;Prompts Data&quot;">​</a></h3><p>Location: <code>test/data/prompts.json</code></p><p>Contains 16 pre-defined prompts covering:</p><ul><li>Application monitoring</li><li>Performance analysis</li><li>Infrastructure checks</li><li>Security assessments</li><li>Cost optimization</li></ul><h2 id="conclusion" tabindex="-1">Conclusion <a class="header-anchor" href="#conclusion" aria-label="Permalink to &quot;Conclusion&quot;">​</a></h2><p>MCP Composer&#39;s prompt management system provides a flexible and powerful way to handle dynamic prompt creation and management. The current implementation supports adding prompts both dynamically and through static configuration files, with comprehensive listing capabilities including server-specific listing and filtering functionality. The system now includes advanced enable/disable functionality that allows you to control prompt visibility across servers, with automatic filtering of disabled prompts from all listing operations.</p><h3 id="key-features-implemented" tabindex="-1">Key Features Implemented <a class="header-anchor" href="#key-features-implemented" aria-label="Permalink to &quot;Key Features Implemented&quot;">​</a></h3><ul><li><strong>Dynamic Prompt Addition</strong>: Add prompts on-the-fly with custom templates and arguments</li><li><strong>Comprehensive Listing</strong>: List all prompts, server-specific prompts with full metadata</li><li><strong>Advanced Filtering</strong>: Filter prompts by name, description, tags, and other criteria</li><li><strong>Enable/Disable Management</strong>: Enable or disable prompts per server with persistent storage</li><li><strong>Automatic Filtering</strong>: Disabled prompts are automatically filtered out from all listing operations</li><li><strong>Server-Specific Operations</strong>: All operations can be performed on specific servers or across the entire system</li><li><strong>Error Handling</strong>: Robust error handling with meaningful error messages</li><li><strong>Type Safety</strong>: Support for structured prompt objects with validation</li></ul><h3 id="architecture-benefits" tabindex="-1">Architecture Benefits <a class="header-anchor" href="#architecture-benefits" aria-label="Permalink to &quot;Architecture Benefits&quot;">​</a></h3><ul><li><strong>Extensible Design</strong>: Built on FastMCP framework for easy extension and customization</li><li><strong>Persistent Storage</strong>: All changes are persisted to the database (local file, Cloudant, etc.)</li><li><strong>Server Management</strong>: Integrated with the server management system for seamless operation</li><li><strong>Filtering Logic</strong>: Intelligent filtering that handles prompt naming conventions and server prefixes</li><li><strong>Performance Optimized</strong>: Efficient prompt discovery and filtering algorithms</li></ul><p>The prompt management system complements the resource management system, providing a complete solution for managing both natural language templates (prompts) and structured data (resources) within the MCP Composer ecosystem. The enable/disable functionality adds a crucial layer of control, allowing administrators to manage prompt visibility and access across their MCP infrastructure.</p><h3 id="future-enhancements" tabindex="-1">Future Enhancements <a class="header-anchor" href="#future-enhancements" aria-label="Permalink to &quot;Future Enhancements&quot;">​</a></h3><p>The system is designed to be extensible, allowing for future enhancements like:</p><ul><li><strong>Advanced Guardrails</strong>: Apply safety and validation rules</li><li><strong>Prompt Versioning</strong>: Version control for prompts and templates</li><li><strong>Access Control</strong>: Fine-grained permissions for prompt access</li><li><strong>Prompt Dependencies</strong>: Manage dependencies between prompts</li><li><strong>Prompt Monitoring</strong>: Track prompt usage and performance metrics</li></ul>`,26))])}const h=r(b,[["render",d]]);export{B as __pageData,h as default};
